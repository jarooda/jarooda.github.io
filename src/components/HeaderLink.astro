---
import type { HTMLAttributes } from 'astro/types';

type Props = HTMLAttributes<'a'>;

const { href, class: className, ...props } = Astro.props;

const { pathname } = Astro.url;
const hrefString = href?.toString() || '';
// Exact match: only mark as active if the pathname exactly matches the href (with or without trailing slash)
const isActive = hrefString === pathname || hrefString === pathname.replace(/\/$/, '');
---

<a href={href} class:list={[className, { 'font-semibold border-b-2 border-gray-700 dark:border-gray-300 text-gray-700 pointer-events-none': isActive }, { 'relative group font-semibold text-stroke-white text-lg': true }, { 'text-gray-700 hover:text-slate-900 hover:font-semibold': !isActive } ]} aria-current={isActive ? 'page' : undefined} {...props}>
  {
    !isActive && (
      <span class="absolute w-0 h-0 transition-all duration-300 border-b-2 border-gray-700 dark:border-gray-300 group-hover:w-full ease bottom-0 left-0" />
    )
  }
	<slot />
</a>
